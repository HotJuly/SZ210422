# VueRouter原理分析

1. VueRouter的了解
   1. 他是一个Vue的扩展插件
   2. 实现单页面应用(SPA应用)
      1. 单页面->单个html
      2. VueRouter能够实现通过原生DOM的增删改,实现对页面展示内容的切换
2. VueRouter提供给我们的内容
   1. 构造函数
      1. 函数名:VueRouter
      2. 通过该构造函数,可以创建得到一个VueRouter的实例对象,俗称路由器对象router
   2. 全局组件
      1. router-view
         1. 用来显示与当前路由路径匹配的路由组件
      2. router-link(声明式导航)
         1. 通过标签的形式,引导用户实现路由跳转
         2. **默认生成a标签,该a标签被禁用了默认行为,点击这个a标签不会导致页面跳转,不会重新请求一个全新的html页面**
   3. 核心对象
      1. $router
         1. 路由器对象主要是负责管理路由,并向外提供一些用来操作路由跳转的方法
            1. push
            2. replace
            3. go
            4. back
      2. $route
         1. 路由对象主要是负责提供当前路由的相关信息
            1. query参数
            2. params参数
            3. meta参数
            4. pathname路由路径
3. 我们需要提供给VueRouter的内容
   1. 配置对象
      1. mode
         1. 作用:运行VueRouter的模式
         2. 常用值:
            1. hash模式
               1. 优点
                  1. 兼容性非常好,兼容IE6
               2. 缺点
                  1. 太丑了,路径中带有#
                  2. 锚点功能失效,浏览器会将#之后的内容作为锚点解析
               3. 原理
                  1. 通过window.location.hash="路径"可以控制浏览器地址栏变化,但是不会发送请求
                  2. 通过给window绑定hashchange事件,可以监视到路由地址的变化
                  3. window.location.hash是真实的在操作浏览器的历史记录栈(可以实现前进和回退按钮功能)
            2. history模式(html5新特性history对象)
               1. 优点
                  1. 比较好看,路径中没有#
                  2. 锚点功能可以正常使用
               2. 缺点
                  1. 兼容性比较差,IE8+
                  2. **需要后端人员配置才能使用,否则会出现报错问题**
                     1. **问题:如果当前地址栏中带有history的路由路径,刷新当前页面,此时浏览器会把前端路由路径当成后端路由路径发送请求,如果后端没有该接口,会返回404**
                     2. **解决:让后端人员将他没有的接口都统一返回index.html文件**
                     3. **流程:**
                        1. **带有/about地址请求后端服务器**
                        2. **后端服务器没有/about路由,此时返回index.html文件**
                        3. **浏览器接收到index.html文件,并开始解析**
                        4. **此时index.html文件中的VueRouter生效,解析当前浏览器地址栏中的地址,将其作为前端路由解析**
                        5. **最终根据当前的前端路由显示对应路由组件**
               3. 原理
                  1. 通过window.history.pushState({},"",路由路径)可以控制浏览器地址栏变化,但是不会发送请求
                  2. 通过给window绑定popstate事件,可以监视到路由地址的变化(仅限于前进后退按钮,对pushState方法无效)
                  3. window.history.pushState是真实的在操作浏览器的历史记录栈(可以实现前进和回退按钮功能)
      2. routes
         1. 作用:用于声明当前项目中的所有路由信息
         2. 数据类型:RouteObj[]
         3. 路由对象必不可少的属性:
            1. path
               1. 用来声明当前路由的路由路径
            2. component
               1. 用来声明命中当前路由规则时,需要展示的路由组件
4. 总结
   其实VueRouter不是一个必须使用的库,使用Vue也可以实现单页面应用,只是使用VueRouter实现起来更加规范和方便

